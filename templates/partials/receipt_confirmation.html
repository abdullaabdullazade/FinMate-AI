<!-- Receipt Confirmation Modal - User can review and edit amounts before saving -->
<div class="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fade-in"
    id="receipt-confirmation">
    <div class="glass-card w-full max-w-sm max-h-[85vh] overflow-y-auto relative slide-up flex flex-col">

        <!-- Header -->
        <div class="p-4 pb-0 text-center">
            <div
                class="w-14 h-14 bg-purple-500/20 rounded-full flex items-center justify-center mx-auto mb-3 border border-purple-500/30">
                <span class="text-2xl">ðŸ§¾</span>
            </div>
            <h3 class="text-xl font-bold text-white mb-1">QÉ™bzi yoxlayÄ±n</h3>
            <p class="text-white/60 text-xs">MÉ™blÉ™ÄŸ dÃ¼zdÃ¼rsÉ™, davam edin</p>
        </div>

        <!-- Confirmation disabled; auto-save performed server-side -->
        <div class="p-4 space-y-4">
            <div class="text-center bg-white/5 rounded-xl p-4 border border-white/10">
                <p class="text-white/60 text-sm mb-2">Ãœmumi mÉ™blÉ™ÄŸ</p>
                <div class="flex items-center justify-center gap-2">
                    <span class="text-4xl font-bold text-white">{{ "%.2f"|format(receipt_data.total) }}</span>
                    <span class="text-xl text-white/60">AZN</span>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white/5 rounded-xl p-3 border border-white/10">
                    <p class="text-xs text-white/50 mb-1">SatÄ±cÄ±</p>
                    <p class="text-white font-medium truncate">{{ receipt_data.merchant }}</p>
                </div>
                <div class="bg-white/5 rounded-xl p-3 border border-white/10">
                    <p class="text-xs text-white/50 mb-1">Kateqoriya</p>
                    <span
                        class="inline-block px-2 py-0.5 bg-purple-500/30 text-purple-200 rounded text-xs font-medium truncate max-w-full">
                        {{ receipt_data.suggested_category }}
                    </span>
                </div>
            </div>

            {% set items = receipt_data.get('items', []) %}
            {% if items and items|length > 0 %}
            <div>
                <p class="text-sm text-white/70 mb-2 font-medium">MÉ™hsullar ({{ items|length }})</p>
                <div class="space-y-1 max-h-64 overflow-y-auto pr-1 custom-scrollbar">
                    {% for item in items %}
                    <div class="flex justify-between items-center text-xs text-white/70">
                        <span>{{ item.name }}</span>
                        <span>{{ "%.2f"|format(item.price) }} AZN</span>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <div class="p-4 pt-0 mt-auto space-y-2">
            <button type="button" onclick="this.closest('.fixed').remove()"
                class="w-full bg-white/10 hover:bg-white/20 text-white py-2.5 rounded-xl font-medium transition">
                BaÄŸla
            </button>
        </div>
    </div>
</div>

<style>
    .animate-fade-in {
        animation: fadeIn 0.3s ease-out forwards;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    .slide-up {
        animation: slideUp 0.4s ease-out forwards;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .custom-scrollbar::-webkit-scrollbar {
        width: 4px;
    }

    .custom-scrollbar::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
    }

    .custom-scrollbar::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 2px;
    }

    /* Remove spinner arrows from number input */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
        -webkit-appearance: none;
        appearance: none;
        margin: 0;
    }

    input[type=number] {
        -moz-appearance: textfield;
        appearance: textfield;
    }
</style>
