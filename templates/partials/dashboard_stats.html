<!-- Dashboard Stats Partial - Auto-updates via HTMX -->
<div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4">
    <!-- Total Spending -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">Ümumi xərc</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-total" class="text-xl sm:text-2xl lg:text-3xl font-bold text-white incognito-hidden"
                data-value="{{ total_spending }}" data-initial="{{ " %.2f"|format(total_spending) }}">
                {{ "%.2f"|format(total_spending) }}
            </span>
            <span id="stat-total-currency" class="text-xs sm:text-sm text-white/70 mb-0.5 sm:mb-1">
                {{ user.currency or 'AZN' }}
            </span>
        </div>
    </div>

    <!-- Monthly Income (Salary) -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">Aylıq maaş</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-salary" class="text-xl sm:text-2xl lg:text-3xl font-bold text-green-400 incognito-hidden"
                data-value="{{ monthly_income_display }}" data-initial="{{ " %.2f"|format(monthly_income_display) }}">
                {{ "%.2f"|format(monthly_income_display) }}
            </span>
            <span id="stat-salary-currency" class="text-xs sm:text-sm text-white/70 mb-0.5 sm:mb-1">
                {{ user.currency or 'AZN' }}
            </span>
        </div>
    </div>

    <!-- Additional Income (This Month) -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">Əlavə gəlir</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-income" class="text-xl sm:text-2xl lg:text-3xl font-bold text-emerald-400 incognito-hidden"
                data-value="{{ total_income }}" data-initial="{{ " %.2f"|format(total_income) }}">
                {{ "%.2f"|format(total_income) }}
            </span>
            <span id="stat-income-currency" class="text-xs sm:text-sm text-white/70 mb-0.5 sm:mb-1">
                {{ user.currency or 'AZN' }}
            </span>
        </div>
    </div>

    <!-- Budget -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">Aylıq büdcə</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-budget" class="text-xl sm:text-2xl lg:text-3xl font-bold text-white incognito-hidden"
                data-value="{{ user.monthly_budget }}" data-initial="{{ " %.2f"|format(user.monthly_budget) }}">
                {{ "%.2f"|format(user.monthly_budget) }}
            </span>
            <span id="stat-budget-currency" class="text-xs sm:text-sm text-white/70 mb-0.5 sm:mb-1">
                {{ user.currency or 'AZN' }}
            </span>
        </div>
    </div>

    <!-- Total Available (Budget + Income - Spending) -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">Mövcud</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-available"
                class="text-xl sm:text-2xl lg:text-3xl font-bold {% if total_available < 0 %}text-red-400{% else %}text-green-400{% endif %} incognito-hidden"
                data-value="{{ total_available }}" data-initial="{{ " %.2f"|format(total_available) }}">
                {{ "%.2f"|format(total_available) }}
            </span>
            <span id="stat-available-currency" class="text-xs sm:text-sm text-white/70 mb-0.5 sm:mb-1">
                {{ user.currency or 'AZN' }}
            </span>
        </div>
    </div>

    <!-- Budget Percentage -->
    <div>
        <p class="text-xs sm:text-sm text-white/70 mb-1 sm:mb-2">İstifadə</p>
        <div class="flex items-end gap-1 sm:gap-2">
            <span id="stat-percentage" class="text-xl sm:text-2xl lg:text-3xl font-bold text-white incognito-hidden"
                data-value="{{ budget_percentage }}" data-initial="{{ " %.1f"|format(budget_percentage) }}">
                {{ "%.1f"|format(budget_percentage) }}%
            </span>
        </div>
    </div>
</div>

<!-- Progress Bar -->
<div class="mt-4 sm:mt-6">
    <div class="flex justify-between items-center mb-2">
        <span class="text-xs sm:text-sm text-white/70">Büdcə istifadəsi</span>
        <span id="stat-percentage-text" class="text-xs sm:text-sm font-bold text-white incognito-hidden">
            {{ "%.1f"|format(budget_percentage) }}%
        </span>
    </div>
    <div class="w-full bg-white/20 rounded-full h-3 sm:h-4">
        <div id="stat-progress-bar"
            class="h-3 sm:h-4 rounded-full transition-all duration-500 {% if budget_percentage >= 100 %}bg-red-500{% elif budget_percentage >= 80 %}bg-yellow-500{% else %}bg-green-500{% endif %}"
            style="width: {{ min(budget_percentage, 100) }}%"></div>
    </div>
</div>