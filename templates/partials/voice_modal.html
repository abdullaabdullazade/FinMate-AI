<!-- Voice Command Modal -->
<div id="voice-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 relative">
        <!-- Close Button -->
        <button id="close-voice-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600">
            âœ•
        </button>

        <!-- Header -->
        <h2 class="text-2xl font-bold text-gray-900 mb-4 text-center">
            ğŸ¤ SÉ™sli É™mr
        </h2>

        <!-- Language Selector -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2">Dil</label>
            <select id="voice-language" class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                <option value="az">ğŸ‡¦ğŸ‡¿ AzÉ™rbaycan</option>
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <!-- Status Text -->
        <p id="voice-status" class="text-center text-gray-600 mb-6">
            HazÄ±ram
        </p>

        <!-- Record Button -->
        <div class="flex flex-col items-center gap-4 mb-6">
            <button id="record-btn" class="voice-record-btn">
                <span class="text-6xl">ğŸ¤</span>
            </button>

            <!-- Stop Button (hidden initially) -->
            <button id="stop-btn"
                class="hidden bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition font-bold">
                â¹ Stop Recording
            </button>

            <!-- Loading Spinner -->
            <div id="loading-spinner" class="hidden">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600" aria-label="YÃ¼klÉ™nir">
                </div>
            </div>
        </div>

        <!-- Result Display -->
        <div id="voice-result" class="mt-4"></div>

        <!-- Help Text -->
        <div class="bg-gray-50 rounded-lg p-4 mt-6">
            <p class="text-sm text-gray-600">
                <strong>NÃ¼munÉ™lÉ™r:</strong><br>
                ğŸ‡¦ğŸ‡¿ "Taksi Ã¼Ã§Ã¼n 10 manat xÉ™rclÉ™miÅŸÉ™m"<br>
                ğŸ‡ºğŸ‡¸ "Spent 15 AZN on lunch"<br>
                ğŸ‡·ğŸ‡º "ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ğ» 20 Ğ¼Ğ°Ğ½Ğ°Ñ‚ Ğ½Ğ° ĞºĞ¾Ñ„Ğµ"
            </p>
        </div>
    </div>
</div>

<style>
    .voice-record-btn {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        cursor: pointer;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    }

    .voice-record-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
    }

    .voice-record-btn.recording {
        animation: pulse-scale 1.5s ease-in-out infinite;
    }

    /* Pulse rings - only visible when recording */
    .voice-record-btn.recording::before,
    .voice-record-btn.recording::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 100%;
        border: 4px solid #667eea;
        border-radius: 50%;
        animation: pulse-ring 2s ease-out infinite;
        opacity: 0;
    }

    .voice-record-btn.recording::after {
        animation-delay: 0.3s;
    }

    @keyframes pulse-scale {

        0%,
        100% {
            transform: scale(1);
        }

        50% {
            transform: scale(1.1);
        }
    }

    @keyframes pulse-ring {
        0% {
            transform: scale(0.95);
            opacity: 1;
        }

        100% {
            transform: scale(1.5);
            opacity: 0;
        }
    }

    .success-result {
        background: #D1FAE5;
        border: 2px solid #10B981;
        border-radius: 8px;
        padding: 16px;
        color: #065F46;
    }

    .success-result p {
        margin: 4px 0;
    }

    .xp-badge {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 8px 16px;
        border-radius: 20px;
        display: inline-block;
        margin-top: 8px;
        font-weight: bold;
    }

    .error-result {
        background: #FEE2E2;
        border: 2px solid #EF4444;
        border-radius: 8px;
        padding: 16px;
        color: #991B1B;
    }
</style>